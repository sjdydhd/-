<!DOCTYPE html>    
<html>    
<head>    
  <title>分享我的游记</title>    
  <style>    
    body {    
      text-align: center;    
    }    
    .container {    
      margin: auto;    
      width: 50%;    
      padding: 20px;    
    }    
    h1 {    
      text-align: center;    
    }    
    textarea {    
      width: 100%;    
      height: 300px;    
      resize: none;    
      overflow: hidden;    
    }    
    .controls {    
      margin-top: 10px;    
    }    
  </style>    
</head>    
<body>    
  <div class="container">    
    <h1>分享我的游记（最大字数三千）</h1>    
    <textarea id="text" maxlength="3000"></textarea>    
    <div class="controls">    
      <button onclick="saveText()">保存</button>    
      <input type="file" id="imageFile" accept="image/*">    
      <button onclick="insertImage()">插入图片</button>    
    </div>    
  </div>    
    
  <script>    
    window.onload = function() {      
      var savedText = localStorage.getItem("myText");      
      if (savedText) {      
        document.getElementById("text").value = savedText;      
      }      
    }    
        
    function saveText() {      
      var text = document.getElementById("text").value;      
      localStorage.setItem("myText", text);      
    }   
        
    function insertImage() {      
      var fileInput = document.getElementById('imageFile');    
      var file = fileInput.files[0];    
      var reader = new FileReader();    
      reader.onloadend = function() {    
        document.getElementById("text").value += '<img src="' + reader.result + '" style="max-width:100%;max-height:100%;">';      
        // 这里不再调用saveText()，只将图片插入到文本中。     
      }    
      reader.readAsDataURL(file);    
    }   
  </script>    
</body>    
</html>